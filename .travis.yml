language: python
python:
- '2.7'
branches:
  only:
  - master
  - stage
env:
  global:
  - secure: "jdANj/666RBhgfX7lAnCdCarL7zcmjmoiB1O0d3fn0pcCcjkOusra3aYPW6LvKCsLNlC47xZW+K+zWVdYKWSB0JWdzoxVB5eh9+v5q2eTLepEUKY0W62TCXnAetq6bray3vw4PmkurLLcS0sqJJj4J+ulCdEc9YF+R9i0g2R+HlEzkqjL9ArPxogDRtIJmCBchkwyHZ9lCfqF7LeVe62DssVX28WSU91LLPCTCPoYyFnq0ykdSsV7bs/PXsjVGPcnXHcjNnVMm/YllXXAzTJ8V54bbx9c5Pr3w+HIHzQf1+V76WiIzcDm8We4YtjOiRFvGmAykQqAAQi+jkqbRx7xbMwC97GXmRnsyCeJcRyNkEowm4wC8ETEq0n914l4QWESuYObHbzuV1nu/zjNTMvELsjCxM+RjuhFpI4mNYt0jIKQ1bMZxblZMPMSSiAUYjNC+4EITJJK3MkejDaVe1tS/LEB9zc9xfG7W59Hz4amR7/kVVu9dSTq8MRejPK8EtI/8rn42uPur9k9gijiwwO1QNYk+0CICn1QtCLVywE/sqgFnVibT0tearq6u2Eb7V6bRO7avoSY5CMgIPH/Bx+1c6Q3P6CeHsUZ6yKN9Idla94w9YsErLcvf2aG2zb9OlKOCKL1Bl8mFjabBdOPrhIQxRVhIzkGaZJnteGJxFiT8I="
  - secure: "XTyTetG37DrTuSv2XwUMWFdumGPWvqAP8Qr421BSW49u+nUDDeFJnxkhVIaW/Nu4JRV9DDB4ao9J2ROzfUbJBFAGZ9djG0l9DYo5Lkhj7otJYNbKmBjGR3P4Rn/VJzOZGx0X+aJAPEl2QfNxcIp7AE9hKkSwWUV0TSVuepCZ/B+10tR3RrKG2ETueIEHdobYJgv/y4MycK2499CGbiPFyzCIFBXUAC5uaTXPrZG7CV6oW8iVdrJNRdjATU9BOY/rSsIR8I30ekS1SAKq2NGcAQfF0J1UENfaRZxFJG/kejA51VQL9yrAHEGBbhOGDv4C1W+g+SDgQFMdMwGsUvK/xu+Tr8oFYgbJQyAjrbmP5ca0YV2vGP81guXlMGwZFXLDIG5MCSda/2IUszEFINeB6K/q7QVmt9tE3EcOIdQw6jtK/iji7TSl7l9ANyld5kDMghE0jit+cnYI8wDNgWHl4q9pw2v2cjNnGD1ZVY+O3RMkypD1ufXdALEf5ZU00jvj5DgPcUVuiVniUOvH5RWawYUR+FWFc7YgoOu+WnkTg2w3Dy7nwezdmVBTgOpPG+PShmukIPzPndZcVVzhEc7awj8ehZ7P7TaTJHqtnBj/ACSZ9CE2MKLaQ97Kidb8pNaFnWvDNjZgxnyzlpNI5r4/ZqAP7ynG52Y35I72uO6qjjU="
  - secure: "obFJ7iL4ATcbp1UlfmNRjFwYVxMwZfewtykJN2YQlUMICRHntFgd13SVKFSMWc48noy4uv3LhFuLtp0zxlDAe4O072I9ywoYyeHMXUZ3rnuhRmCXi5oM4t70liIHpL4+UnDTHzzmv2RXHEJB26egTCtyab6d5bTkxGjTJm09MiCM822jkp5MFvdj+v8W7gp/eLWWKI/kuHiyi3aGoVA9BV/2ECl4jPiiuTKiN6Gnk/BYZFUsVdVZ0MGuvet4PRvMHpb/tK5CI+Rcs0oBOlOxFrfaKteX3DwkEZHta7SXbpJp/a2ft5LtnZLVDBuxNRVU0h9Jfi0hJGaUTGBvxc6yoE73J5oCyJN5SgaGK5O5HaTG2caBh8P5m1JPOAI5/88K8VPhDi0YpyiHyiMW0XZJOYOT0crEFUnWS04rPvnVaDoc/Kn5TU1v2PVRw01n8umvPRIOVex0SSLiU93jWQKU+FCeQWhDTNG8puwxDQMAu3vOgZgQ9JEp19zA48bDsk7e00Dv9276gdv0AKjVKSLJtCbVHcTk1zYePiqceISZgEFe1JTtG5s/fd53bt92Q7FZ7aL90ycpeKivMhCQqYqNovuz9mf5BdPzpQH++lIRKMkHojdQ6LH1rEgxWpVQ73UomO7ad9W/IQ64NFff0kIX+mt5CJ3oXLOtLjLZedyqF20="
  - secure: "DouYV5z7zomYz9F2OG49gtKXqXsi1paYNvfmL4hFBfJX1ZIzW4rl+pNFWeB4sqbRGWQgnrKLYwiwrzr9br6sjUoOS1Cbpru3KLG8J+Q5CeQrNYKwAO1nUH1ay+72hoYL01UmzgJdO3uuZ3tT3ExQDTjWYXahYuUKQqfCzT+jNVVdAMow39Ou5yX0Gsu2f8fRiP4gR3KJ2SXKtTKlniSGLDgkDmUosGnitOkxuzLkBXQYlM/mkO2HsR9Kb8vuWe6/k44Ellk1ZyW4ls8q0dguMX+YTGAr3SEpwtAQFVSZ0ZLsHUPozuEveubhos7n59yGuezm7mK2fjWbygPXyVQhxSa2KESW6lJsLkcA48hjTEPpCpi+cK738zftvMA+cYsxdwqtcMNXnabq3e1oCvPzCEnBEH45XYFThL0GiNqTdmuV5yXbvycsWg0UoBn7sjl1ubfAdvn7XIffd0CjUbliYTPgahqBtzfhuZRQb0BaqBmyh8V4sW2l1D2n/6U9KScCoeYfSSWYzWH1jaWGgYQd/yOlLsdf7K8C116msN5/a91NE1swIV1I9yv34pa5UMCmP1+2BILH128FDVkwL0JckRncDsO1nKcGwXQ+REGC+quEyCRY/g7N6Bf9rQlTLvT+sig4JIlsmQvSQez+TwXkPVFkJu+mNHlFSJEM/79L4jc="
  - secure: "O/a36JOzX2DiKGyUjimLDy1kfysBYiYZFMZkhqkRnGEFT5qJRIyGIDVjbXwuZNgkgipzdMQD8lul6j7RiLI8lwqZnx7EUt7wYO97go5Ejr1ENeqCn57RpIi8Kcxa2Uvadu37yRaFfg04Fwzjc4OQXpG0GpKsAOw21zzBnQ1uSNB7hMAQHnWgteDhvxPqWyz8jEGEn+vp7YPJYBYIVVbZJVi7a/saztPVizZs/IukySmkJnkSXhXGdV4CVCPQuJm8Dpx+Q//ucIki0b5uOe1AlnA1/+Ss91FpIhy8AS/nHujwz9ao1jJzIzaTJdT57jXIQddoG84hRp9JJec1u2o0v3oR8PENomIge+KunkQJkYJgxGDNRkB2+2Hv9olFql90NUWnNWfWSzOn/BFWOyEx9OdkkigZOZ2bIpJQ5nYB03jHjMNZr9zaXUESyZixQrjOsmDfh4JXwcLB1lvGLvbRZWPsM4UQXBhFYD/GxM1tOI7LrrJ2gPsp2qQvVWApXbloDjJP/GawStqrmq3yvjCtMPvhHmkM6pIt0JzVSWOL4MlSM/v61tfuq2FOadsVkYoVYaR9Qkw2p/+V3HrPtR8XRJqJVVeXQPKD4rQI+3LhB+KBv/UHW49iIGF7nMrzZnzUP8Or+HapmqQAxG20B3BSnkapzLd1cagit1KxFIc+6Fc="
  - secure: "K9uMJwJV+c7UfymOl6tXrbtj2x00ZNmSrN7MxX9qFBCFnFXmzVwC3z5DNRVueZpHrvWY7ofV1S1z7GGN3pJ62KwucSeeCL/o52gYRSoEK/anvzIYYCYraCfIVvrVVqslXQV0lHE3Bil4wtfabyuupXI6ISOE6tx3GTK7KpQciepUP2M5BB6WYk1oBIAq1v6NNYR0GMJNn43jqyzI30hCzml1Ago/BOyNcHwvxR3dR0ynMEIBoFk/MaaFF7ZnYVLUG3Yt9QjaQv5vNAiR/ab3ZA63xZBELssIhdhYWGJ1c+8Fg1S/i0DbYwDuKLpW3jgtjGis1LX2axRYbYbKrA4KN/C5aNoy+uXPa/GH/hk8U/TljX+I0h9wcqNOcKALdNgwl/aX4GAOJ43Z2hBfWw2hqUBomT81GdP4BWAOgj/aJfpceDzFsBGsjoV75M+2b2VK+rqLLuO3V6JFK6cIMMgWCnT1pDG9hQeETMUXZ/Jlj7HS6g5slmvkIE/JnsWWKbSzQrr9poap9on3nBOYSXNgv/LWp5pW8FrBlnvBeUSsvI3WKIq63c2qnAyL1pWynG55KNqHEILRpsKCBVCLrSYShfI13FJT1UiYa70367zaBTxMWSIz2zzx4C3r518mxMLixxIRYbXoeWHnQNLJbN8FnvUVJEhiLqYBg/jmBVNpHr0="
  - secure: "p5w3TVmVhzEXmrkF0+FoR8Q+4PVMiPYm1EPPqOP/oJf/3uZyjzsvJZzM0kj9m0LO0yNZIQa17WXmbjxVhKsfZe7F+O0Lks739wcXfPcQ4oOaVrXe5P/K9y+oJ4ngxSkf4DThpZgnDuuY0i440X01LpXHRjtcFJovdOwR2y+/EHuSXApeme1BNuPv/HNGKOMRFRIv5zy/slJkVRQ2GlCb/uB4706sdHq5W34loh8uHQ8jTqWAKmIZZZsjbl0ep6lEa/EXtAwWgmdRMJ8ZKrXgkXt6tVTxRKJLyvzLfioQRvt6nAL7yNwMFNbBJ7FsHSXrELSpCAXI0Rng73Gu0S13OMyCvIUUthOCOxcmXvSJi+h0xZvwpC7EA64bDh85oSY5Hja0Z5d75YoWsqboBxoQbC8ku+1tuilECg8UbWep+vEmaSup82CUfPkOtt2RXnuhhktBamysyOLCxHFCsV1vfRqia1o/3AXvCtZz1L7aqDfTxBEmPdi6PRei7neBhCcK/yuKiUOdFrx8fSLTv904kLZE64vMJoyywvkDkO/o1OvSX1eNDsJCvaq2xqLhmQRB3xeZMoOSUaGPlqUv/EtSiFRE9CVavtbXg0q72JPLW/f3MOfVVgMN3esPSLHNmXGVpOLHfK7bdYcwEg8wh5n9n340fYcd5xtJmXtET7NxLQk="
  - secure: "clq2hEE84WoTbzlRyjBSIUruU0jkul/62Kpx13U1zGl+GvCqDsQEmDITBwzzZ5SSVNKdYD+sw2KPpT+/2gVK0du2GeNlFlm/htB9oMcGl1wWE9nPpA1gORVi5UZjNeoJYuLxpfgkqHHcjnXyNk05l6V3j7G8N7pJDcygFd0T7QwMyIiURYALcGXIYWIHBjt+yI7jQTNw4vhenvL6iR5IZTyivB3rUuTIqqyMbRMFX39XUS1aKeejfokZP//EAXZNdxEjKAgT19sobPoFf9/De19tzFXcMDx77LLDKbsp6XKIxB1uy5lmqRsb9q4JHr2xibGuitYdU8vz4Zcm1mG8jgehXd8PEe1PTRqnYAeA9iq+CZvfsRoDSZEl3vIyMusGbc8Qqw9mmwdnSJVjkv+pqddPZbn7NoXUuNLaKrhm/atP6q2GcX7u+2wAZtZsDny0I0NLp/uDHD8YlRWZBh1dXmOWabxltTQf0vYisQhIDrC2oyCOBUOJQICqMoomZkqcLZ1Mx0XFx5b3TD31W4LxGki1eFudi9zZ5UEGL+b3mFdwFzfiH/4Gy2dZHN5sZ2sP53FJp6yX9gJISRhkVNIJaEItvATjL7L0kHZJU+uEZp9ljHBBFiQ6WqV4ET3yL1l9WOk4I/m0oWvhFs4qbDILzXW2GuB44sHSYMa29A8M384="
  - secure: "bfmiFZDqPccdwCTp3R16NNkMD+T11jAwDZJoDxiXvpdP+aJTapZ+yHe9hAtEuvW07fUQAWNCvxQsxJL0vxwB9e6lJqQ5TujABm1hYkjxKrb8/JcEJzefwhp9cmEPTw+9NfwSjzVRQJAxRuDvz3NFLyfAapnIAvSZEpWA/OeYvcQhvliWTfqaV2J4lzs2ja8rbJmZ1FszD8SgWf7JWnr6a7kny+YV22wDWFqnePHGb+MP9JmEwH/EC3oa3L6NZZ1t139byrAjf+3ybtEn5P2M3sVnt/T9CN8H7G6tHAZE4N+fFYPmtbkKovm0mk4tTpx4PL9gAEm6wyjXsG9yjrwrItN5q9/Hrfai77P/bG3T8/3JJrBve5skzKyxYFzttYI/f/ptdRtPEmfwW1CxjgD3bbJIE7xhqTqIHIVWfRFM4P7PvUUuP02z+/4usEVc86t9+jcXr/TnFrmmWZK9sQTwIOrb3a4Le3jS03RuCl7z9CGJkzCrT6cPyY3uY6ZH+Yv6uMhVjce4txbOCBXXOMbEE+U4jVkqa/Igz1OqIWcV/PU9UG2ph+hCqbartn9p8/6VIeKwONGzhaVCdYJ/be+HpQzeJGOxJoGqQvwv/Cts0cYXNFZHXigUj/lRdjTQOCSicgfBnc8VcXb+dxEacmGhv5PkJCQdABYL543tl4nzi7E="
before_install:
- sudo apt-get -qq update
install: pip install -r requirements.txt
addons:
  postgresql: '9.4'
  # artifacts:
  #   paths:
  #   - "${APP_BUNDLE}"
services:
- postgresql
before_script:
- psql -c 'create database demo_db;' -U postgres
script: nosetests
after_script:
- zip -r ${APP_BUNDLE} . -x venv\* ./.\* \*__pycache__\* \*.pyc
- set
after_success:
- curl -sL https://raw.githubusercontent.com/travis-ci/artifacts/master/install | bash
- ~/bin/artifacts upload