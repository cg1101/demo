language: python
python:
  - '2.7'
branches:
  only:
  - master
  - stage
env:
  global:
    secure: "oHvLTo1M4uJPvVx2wuy58Y4JgpOq3y3OI1gbi8+hepZQTUVQQ/PhKtYjX4AUWfbbVgB8TDXRwEUSkRZwSUxN+5qho2aBC4p938sBDvfYijXYCSgk2p1DlgK1CF3cCwJvlTyZyAXaYT11r8Y+qhKRgBBHGCG8g3rrJctuvredr1D3LBUwBytymOW1fWxTy+FTq48O2+ISapv4rBDomaNMoBCvd7/gnhoXnxwNHNBQ7ovt8WpoUZYVqrrCYfxV58CzzkHWONc7QMadTY2X/Yyg/vvPa1uQgmVnb4R4YrrV2FqMPJ0gKIQTqp9kP91Z4ZW5UZpF55HbuAwhUb24mI5v4YNvVRFQSfpY1joWn8JuBmQY9KoATVx6j9n6Kg6PcMxf+4H19jl4PRQuTb36umeZVY3tbFSW+8Gdw4hEsx74jlHtRFvEpFvTxT6Q0fzclXwX5B6+Vk+A+oNV5ucfpOCUTLwQT066kJAfFhl1Nx+up/X0JkUiIlXxV0ip5/DfaLGlj9qNxrRCGc9+8KPBCAhVUgAj2qhixYLMPPN/0d5aGxaj+8txYJSrgLEFRXRcF1J6Ld4/CiSltm4jGmDiM0esl6APepUBo0uB5+ddC0e+2J6Op55omW5HsM/3ZhDLUlPghNBBwyvvkapDDpD18CqotLXl12+9gdsNgXbr0/jw3UM="
    secure: "UiP0S+LNoKEl8HwZQtzkDYkRy8+bv/yDOwRL1THNWJiELWARv1UCLgvLZUgDHANEcxu9dWrnNKAcK4MVLeLbSyR0aCTuLvWA7zGsQccLqLqFJ+oZ0/kHAtriwjLNp0klPVSjgo4A+JLapBdoWjmPIKRd1NXCZZ+d6DmaRfA4EHAO3ZWgiP5+GfLcV5HDGQb2/tWZdo+tJL/Fel/aPVgOGp+XaM8CNQ9oLhlk05WbErKlL4hIA690T5W72zmwvSY+rujGlvkcC69P8aafoGeQKO4Jkbb2CglnA/QVv6E5paYlfNg7sjj1LlmaMTHeJlBQAV7llGhU7QpcGKCvGXQ0rhLGFnPwLQjBk+Y8WzBEIwoAMHWhUl3k85mA/cSVksIVRFRMrT2rwIyVe02FMkPwBVOmmGkjZjnOaxsQDx0HN9xKsK3zlxFbHI+soAO/B+PZIgW6Hovy221NJ5VDROgT7jKo5KCL1+ANdTEmmSSEM63ZjREwd24rHKmxVTQKFViaIU4COkx2LEKG/r+a3taoibWGDdYnjyuZ0TwYmWdDbSLCuL1fz+Ky5rIlMysSVEgaL2PyA7q0lADxOIHkX8jo/SunusVAWJ2slmEbKHs/5mH/i719yNTYEm5W3fQuoiHxXMZAcHmDvlZL1S1zszLx4ClolX3VMgRLWtb+wmTAHWY="
    secure: "Lmfuk51GkMAbR89DUoAVAUDq5r+mcW3uzlGLYcqe2YOicuGFajgYfD0Xc52y4KtmO1thCXPB5rlWEdB0a5mtaNXYYdLX9f7G7LT/Wolxhn8NBhxbB71h/ri81+dIqpPRGXGPEtVPqV2dhYNdInG0CtFJYd9Dyo9tIUsk/Y/5GmdkLNQqNrV1gxAyMEHJmxi6Y3Gwv+6qKO4F4cpeJXIxmisSSp4hHrNDNrHZeNcYikR8SXN6FCqZlq1cwkrRlCceqiOuVmohJQmG+6Ul7LvnXWpEz8c2umXNajtg8MKG4bi+RJ4b1/hMpTCotr3wTKDawVdS/dsD54hdZyrTtfGN9erCFWyA6Y9HxQP+aSdruJwFivfQMwJvWpw6shM7XAW69PhhLqRuV7jZFjjjb+bkivIikIWteIc/7o5aUGvSrGp0ohw3NFDadbqr94EBB7y1l2jxf7D7FVRNKfKV6m/vWL3mg3by0Iuq6NNK8pI5cVwMwtdtuq9jQ2fDd64vVZSWYz/ty3HVedRmVN5y5Na0SEoAlpMr4dLGWRpo4XQ9iSZSNnATH5yTmhdfPTs0pn0VJJvrQunpuPT3my9alkYVhIPQ+jRqwBplcq/cCJf+JzsraNT6am17uvz4QYhKbLYSe2nFMBM2KkBRIgTiod3Yfx+tl3iXn2+EaCH5FAZinow="
    secure: "IPyx+tzxRk4pirhZv1YxGljGfoZ1NP9z7pXmXHzgq0Rq32JQed8LDVIdjOSVpHwKKidxYD1Qwibww7nqrM5kfrbdkXxZAvxriKb6Mt2Nx6pTQX9yihP7FiFScFj0JkmAo7LH1lYXpXLxUicuYs7kiC2tyqGcYrX4DXjnGhJoFO2J12+iL72fHjMYlI9QYrdgGomwCBVKrPt3+c5vc0LjUH8vV4A7hhwb12v01oE2t1mFDwNTgEI0lWBsRQpMpZ3P/YIm9b27T3uyBZCfxO5JxaAoF7RtuVtfuJxHFPAqGDOp80Es/aFawgkSD9X/iEx78aI5J8xbP/pc+wCRlFImz9tQA85qyXJV92B5zGMS3TGGe7cK0bZlYgQbVpsPQHQh476oEdqP3aPvPKs18GuFSeHL3rv03PXP3ERE9cvGDV6gF4xaOKVykXCckMEW7iCyBT2Aqk8cl5KCMsOeUeckrOVJOpzJwgPH4dImTbXZDRsJNmswf/+f60WhsdmaDzqyTnGBCFp09nv0A7EJZjbKCB4ZtcHSDIVaDY8MaOrOfrGv1c8GTJIeENWL+1J6+P1vNVO+N7nzev+qYax4GIz+DGXiXYEAdzslpWyD+rwWVAaxflyoOoktY1dWSBLi4Di2MuKqSsUjE1FGzQihCcW/EivTMW+n3t8q6gF3d+oroLg="
    secure: "a0kqcqM4BNG388p8OO4zsCU9iJNnyraT0D/OFsUO2W6UmeGQ74Q38YE1YSPWUTuDilsl5CWTmK2+Gezccn/hdTV0Ut6guq2V+aY6IHRbmIaWRCuS5kNVSwiWvUH2YbzNznNmvmAadeVAW1YsZE6EISA2pbwBHxZnaMqE6RWDEF2fiQ3dxKtzstdcKKgCcFTEuAa7i/SE5XPuWfaoYB5g2gUK5BlZsOdmyYKylSkRIrAhS2oQjeO2bhrZAEXiD71qSLx4pbxLHSA7D6elpt8kv/BNeS1vMhBZko6Nf3aRhKXXHnk9s9xEXUJ4HnSSMWzuIybtTRcRLbs5AGpmivxAYr5DF6k+xWG0U2lBT4ZmbfFQjKCYu7/w41fei5rACNWqVKIrEi99bQiPH/UX2lni+z2J+GvISiPF5KpYhxY5Jpvaf7JlUP6qvfITAJ6YdlUIVutp7AFFvTbvVmZGlCp6QgtlpTLz1FeUk1mV2mQ+IQtBH0m1NLOIi6WiL62qZ48Dx53Szse6Ty2pGHqDwRJUFhHoMdP27e0r1CX9IMiFZvtyZYubfoNgxem+tHEBx5x+9ImmvFqSaRDiTh6qAjr9DP6UlucA9rzOdnGcDt2ZHtm/zfpd3ZvY3j6lhZAdmVUfP5/pORZV5ugsobp3k7tqxyxbMpugKroAHBzOA1qxJbM="
    secure: "DBJ3Tmbnupv+v0uf8e/hRtHf/wS8WqJTiWlbpWc5yb65+RlmetRhwJ5MfAFkaKSW9td1WyVEgces1M8n5ulK2k2iOFmecIdVMb0DQV5LZ84VKfBXspI64qnOMMq6EqjC/4w/xwBfmWdudD3ngrULRlITAT3LBQ/4sB4tZzINiEyEzEaxB/kP27GCQlKCYz2pJ+avbJSw5Ko/QBvL19LBn4DiYTQcDhKCecE3PXzoAlRAmUU/1Sdr5H+mW4ucewYkB1RwhBFVQrnUAjdITLkl1x55ei6Bo5Gv6usAgOYXDNUUMLdvhIKyZOD0l5aVL3P74icMi31sC704Of3igLuX8W+cIFJX77PK5a5xct//zNmwJ+/2LECUrwkfDwCj5B25IgKv08MSIH58VbYkG4K/CxvtJ2vkCxADkF++vyMQ31+HJZES+6XZwt6xLN56klbMan2Z2FmzIZsQLc2dY9VqD5SJCpUcZxWlzinJIg6z8hODa/xY/xJ8tCYEhUGNzb+UEXhBjFK8ausxYJI20OH4i8hVs9T2nN3S62fdhPMnIqZDrkeTkMMiZHNju/0mN3/sForrwsqX5SN5CGfEqCYxtTcTe8i3Z6NBYXFyVMrWdPrl0Z5iceRIG/PH2X/3nyqHyb6NksmRpje4knrW30EUwpqZX2ZHvdjEEg230Rf8zCU="
    secure: "Wn/YorzyifRkbLcb8zwNSek7pV/u+KuVImad7f9GYJtp4QEruxNi4KM+4Mw06OWgaTn6Q9P+3v2+XG09wJfubMh1ySAxu3LP6qUGeozGBlaGdlzQhnYu8z91FWSDa5yHGRl+c4LYg3nHhlc6sQkkBNF5hoLZrX2lpyxA214xEMHDpPWLmlypbTEaN3N4qsOPGzigp6eh09KEFKWSk/iY1SmZ1d5/tV+3FfdOIlG5KJFwb4nExzxdmA+gqrtrDCglD28ArcTp4D1m9tTsKGYL8JXyCuAKgwSBPL6XUBuBpcZiusq2JiQHlEmE+olEusjLUX/kKXXo4ehuZyMQN5ut1ZAOrFsRkHdvC8UsoYHadcop3m7YAGTCrqt1y/QZBwLS8sT6NgYYiQWLI7S3eY0eqKWxNmrJMEMgZ3F/9naIB27aXsocUDUBj2ORutYF2R+RptjIf8qguN8smIMaewoTr8ahJpdus0Tm3ikmcCPzZCDIKULV9jDeIpd8YEgc/9DOH77kEnAcg+6i90tcAzJ5WO41YrG5G3GCl8NsqiP/WDavb7I5ufFrMehyyshROOjkesE4urV2L3eieb3zXL9Yf6NScNlzCXr2Gam1BiutK//Y5L12FwSdz/4YNvrK03xqVjBsG6i/9eqmqhscWmcPyBNRjUh6o5x8G5Ff+6ov46Y="
    secure: "lwJVs1GrnsYrlqh78pifqHX4Z/KQpDYaVrjEX+VSYaumdBishtm1lwMlQQVQyiP/z89AecRQ3aK+9s50Iyl62ZrPeKBGEzw92RO0WKABOFYR+pNR4I823rRQ1S4Ak22tCNvXCylXU48N4aLq8xG66D1YacXYAyW+Pz6+4fLXj6EEZ+O7egPbmppPyGqXf3aZJ4FOSYDnEZRKCMM5WS3pK0jvgPi4EtbLspxBSrbyjyrWtrx95af198Bm5BR6Uheqr7modpn4QpZ1a83uLBbBFhq9lDZ+PXRwp32LlhXa4Lza63RMFe/BmTxBrgOzhOnp5PttgJklPViVzK6KqEH7meXUYfJV/3gdjdPtM4fNzuWCI3+pSS3lL7uXgSsTIJ+KvsHvFpsPS20J5eBUqVzE2KRKaf3pDH9WCTRv//xdFGwg8eEWOaTvKvxRQ+ss+aZLEYKeWsD3bhG4a1jgBcoERhvihcqeMCP2C04TI5vH2v97giErkEkkFxjOypZnbL6TWloSLOrorm0CU4SzF0fO5ggQAP0YV3akLfal/YGLmpldRV+TxUc1ZdcW193XnpeyuNmPBPg81Hww2ZdU6DeDkIV0modqWtS9Dr5EycH12Gj/Dv2cn0bkYK/oJ/qhh6/DHQACLilnw1zhEbhoCorKmgEvuECBrN4t9iOZ1UJqENk="
before_install:
  - sudo apt-get -qq update
install: pip install -r requirements.txt
addons:
  postgresql: '9.4'
  artifacts:
    paths:
      - ${APP_BUNDLE}
services:
  - postgresql
before_script:
  - psql -c 'create database demo_db;' -U postgres
script: nosetests
after_script:
  - zip -r ${APP_BUNDLE} . -x venv\* ./.\* \*__pycache__\* \*.pyc
  - set