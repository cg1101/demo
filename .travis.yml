language: python
python:
  - '2.7'
branches:
  only:
  - master
  - stage
env:
  global:
    secure: "Cy2yM3BJd0VRbYhKe/m8fxd3xrBfb752BIVeEuzWFAktuDMWMiYpSimj0ieAxeGppT/3Sh/3niLN44n0mFogUGPsKlWOdzGRESA+E+A/+UaKkQT78wkj1rKk1YHo889+BiGVeSKDHtBYZCfQgPwf40prRKTo/F4GYHI1O7kNWazi9kygLEvCFmNT2HhltRKwm9anljMw/vm1EWWQsYoxxE22diqfHZW9kW0Hz9KrI9tYP7JijX6z0fnRuaZxiniF/BKQ84XcfZvBI9pin5HN9EiPl4qCCGviJ81oLW0mcMWOG076VaH468oilaAMglqcq1oVtwkkrJsl1mQPmxx+tZkxkn/JtBW5bXnG7lMbdCDFEYuK6USMJZVJxgqXYwtJlVIchpMalNGIwTfhBaUT+MJTSQzIa/BmxP6dn0DDZKp4HaRLc5nCNClgQ7i74laBlyx06uih9u90czhyXHi/g5E5M8sfSHjdl+9do8SrHNRxMpq7zyHDmTtTk3F8gKumbdMXAyR4p9BeqXfz82upuJZQ8bgO+WrlvPaXRLVg1nJCe3R5+/lyWAt7ZQT59FQv7rXCNd9cSET3n7U70RMFnb61GY+XSVs/sMyFw/wkC3D+FGnZOGWMe8urY5fh4g8tS4smXijMZot2ECMKk6FYnnK+2yGDFXH72mAhd/hMwGg="
    secure: "ZfQigcAm2bJBwSVqwN9JlzZ2itsKcpXF32GhhcinfFjfrWJV1BGo6Zmr7dnuK8Xz7IIUddaHF7wds7VNWM0UHsK5FQdEBrTGI42r/8OcyrzGSHh+Z4NVXJsEkP+HU3bKynAsl25SArcFzIGHAzhDY4Xv69qOcqw0UaQ1dtuFcv7gkEdVbiFwGgTwh0d2en0o3eeqjlIb4fdNB/Njd1NkdEbDZLNy7qydmxI8JiNzEQckeiFmU80N0PNdE0ZJ/ZnKMWf92It7EIZioAbKJUaaDII/XNbevmsncElctyrN6qAAcRibhbUJMSEdqO/68nt6NG34iddYXIea/KxElQhQ9kj0P6k517JfP2+3ZMX5m8IvHO/IFibiMZirASu2zqTY7tJ3mNOaH9DBjb1yV6G+Z2z/c9g2ze/7z2BX+ysBeWg1rgPxKVlHp/JrHXb0CZJ7bAWnAMgIheoy3/jvuwqkyerK8XnUaluOzmkawQ5ybytU7dh/3rSeehg5Jq2Uc+ye9Fs7ra1dsHEyZn4UvPlhP2rlLK9oQgm6asC+316SIjhQy8b29Hm7yj1miM7ISjgc1y6Y3oirChMX/xvsCCzxEMBerIg+FZGx9t4UgK//hToiIPxH9Wy9VNwDbm57wQJ5DsqxktalvL9GYvAbpMF4YAi8gLqp3HcWFTmuOLtJJsE="
    secure: "J6KgE6T/4WoeZ+UQXlNUmmtcvoCvbKimlMC4roC7QDPrYLxSFZAgyQ3RXZdHfQTiRyV136kmU1SKS7PyXO8Mk1FWpfxCgu4UUGwRXj6adP8Ka9jeo3jVH3o6fgLFVCdFgEl5JFb9z1qADlwGXMLUirfrhzZ1z8Jtq8MvtsDPclQFCQWh5+6UWnrzh+Bd1RTeSsrgLGkSTOLAb1jdwfBBpUdWERNTZjDXgENEF9zVa7M0UR8af9omjYNWX+dTOvCQxH2unLYA7fPT+UiLwldCj5ZZqLNkMSxXibrDH5LgofPwdmuwFA5NX5Bls1J/GipGVeHKxryb242kMbGRiqywIC28iWOquPjnOjPCjJtzehu1T8wSpiIFC2+Khk+8iZwoLFewVosrOkXIqSvPITLPtSiXUlEHt/2YsCdJcYuY2HXuF4CHFu1R8BljYKcZ011lpZLgDwCq7Psoe484tjm/+3dRWVzb3fObi4QoYktQFQ1gIrI4cN4lbBIrn2Yd1T+VPIFUZ9YftVn0UCB9EwtNQomFICG9w3BBSbGdgvHMI92TD2ULGaxQP0dvuB5KRE/LfSHOgv4UB4NLzxqb4m/+Q0/iulI9D7SJ7WW4bGCy+C1fZmKbXbE/zKIDSjj01ci/Jehm1A0xRKgaFuMXd8L9o7T26co5w5yHRojVk7OPrhk="
    secure: "jfUWLs2BFrjZi+GfzEmYyJorpdPjIgLuN9oVI+LgUSCxT6U8UQbcKs9rjl0P5w6wpfVlDpUQec2qaPzObYE6Ydmoh3qaoCLedREn58XapaeyuJChDtNkWVd6G7rr8ZT22Me44TBd2833uqBSSWU9FttD6f5G5x47RnJDlnirJJJSKsJnKmxE1FBeMOOageZLUu+g57LsrWz35EMSTT38IgmhtKl7/as5/mhEZzXZv3PT0MY8Kl1Be9y69K8vRkZ4kACw0iOLDi30sfwtPbsTOTn1imKn80dvoF1Ls+ZI5LDva5TO52KkbAfTLRS0c1SvhQPRv55DrOxQqBOxcAZErsobvouM0pzsxIA0OuIKspYWc6uWZCgt2idY5ZSqb0AYm/d4TdSH129sLPq0V5WXMob3oop+p12fBSpkBhCLvOjlefUnltNssLGpuzn1zTIDMGOYi4v+llEH18CeR329AKLWyqIH4u9ZcrYU3+WqTIlRQraSeNeqO2UeF+wMPAAtD7V17DgOktQyu5nWIqjftAouIJUPwcK6wlbhZ2plldy8F//Gem2TT/m2VEBlMqc1QA0yeD+6Xz8PGew5GvC4R8INgBd54sixD8GUixmOHqs+M+hOg+Hsp5CEzFngQJ4uxb0nkS44elfkB/9wmm0R0gLabDjdhiLaC1K/6aveIvY="
    secure: "fN/ir9JOhmdYUdI0VDTvNpYYrjjkkUt6+ujUrDyGhLb4+H5nuiHfn0RmwHGotaHDsTcemRZ/6ldXT/dBhAp2brr4hHl0Xxk3ms+65986jdYdPmR2b9/TWrSWh7f0ro0T8/hCurpajh63zt30jDiM5sFsa4KFO6c7SDFhkkzkTBmej/80QjtHJ+RH/FphbLeGeyx210fxH5Z+zNQhnw8lH+juTAnYGrY63qkeUF1TlJcs7tmGYD2tYRF88f2A+BLRvpqlc7V3JEMm7IDwgbxtLe71T/Jzo/Y4nFs/UiHZ8bur9/yf89Kx+fGe5Wce4JRDh5IjO4Ked1b3ynMzsWCMoifsG7rIppnwS/KO5Vd8d3O2YxTbDRF3wsMEKvISuhzzes/zxd9J90AlTsI7zjTQn6y7901J+tUhXU1+2qiKehmzA8IEpJkkCLnlzrx7TbLtZD+p4xVYBboC6AVGtmh35oLknvsZJUfd/j+X1C+29XwyqGHF/iyqvaToubRB715R+AlSO5dhIY4McCohHRti0Rix3rP3UKuthc/BuXvyGw53k7mt8rBFyZT0n/jZIi7krVWv8KoK/kxUvAslp+ftFuQwQX8OzOEuCpFaeNObX9tqXGmgZDPLu/eQ1HeJ+ixq89m/UDRrWnbSSmdXgNEVY8I4FAwqzfrXImdeOjUpsEA="
    secure: "GDjiqElpA0F7ti/pNdrSK3Y2IfXYqQyQsnuE+cIMzDr076NkJ/Qb2gHE8ox7gx8f8lZjWyQwj42tcPTfo2DSR+ZmFjw22CidcJmUzxswzVtEArhvyi9lSHrER04sFcE2d8e2lfAvNmI7dG93QuE6Nehdtf+5H0s/rFAns9MQPTw/13Xo+c3tg7mQ31hboZG29yCSiOHNx4cirM9Qt2NZ/mPFH0Yaf7g2Q93JWScdg4J2QP31Puc/n2LWwRS1uFt6mZB+GKDDG5vHvMGn3atRroZIIVpxbdrdiVlNIt2Q0SD8RYdaFCpXtYqmi6Ck8+ifIZ7GOan2JavGoyBq77/+I/TmnESfY3nrVXXD+nLCilUVTm/GlZMw8anpUIhuyt5p018s3XQ/RmGc7TVeVa9Fl/W8bvBixts9ZEQQJ5o+wr5DV84p7zbNpeD/UyZLtnFS8vGMI5dYOXM/CnZUpBM37YsIwG/LlypzsoCNBOWVNn6vbp/2amyrbbYk/cse76EjTuvo2iVTLi405lainSpmQppPfb1O0XPcPlA9AszdhpZZDQRvtPmzFKaGj+mdf+LKk0LqXan3AR3+pRGOIfFaL8GuO/kosQSALsxnV12yUENGmNoyZM/e2/T/2W+wFLh0btrGOm9yfuWkbLqiSGnxxn35MbOQ+yGOF8ckKI4wDOk="
    secure: "Xhyp2TJb4+Rty5yeQV3cBFXG2EUlvGxWgr7ebkErA0anZ62H5gyUJb/7bq7kuUlZzITtKWO5vkKBDMsfa/gQ4eTaFSp7oO6XMV/CDM1Y4J0T/Ejt7LEJlornt2t5LN9le/LmEraY9r+KEajcr+W/XeJz7JnWymIITMV7UuhMi7JwlK4yWIToOJkOawo5Kdv16fHSyk7Yt7/zNZeib6OL1NA3swoJVYiNQjOIu6dlgb2LPCOEsHPSzZBLkNUUagHZle1KH8y8y6i2yc0rmdmHMdRP8zAI1vBJUJiGS56V0zn+bsqBLlIXkv8/nx7+fbaEgdBL38H0qzJDGme025XJrxtTkQW+LSXGQM/qliJMcUQImSa8plsm0eq4f7wClt6dAum8e3ST/uSES8afqYvbX/8UZW6eQhWuIngXYm1rGXOjRluIT4JeKcsDO2dPMfXzjre4DmyCuw0LylezlpWKjRQHJcJ7Xv+UAn0F3540ejRP3EXn0vXUJug6Rk6aExLVq+9swVBWA8kISZ6WuZ6fVx+sDI+2L8MkiIdtZxueevVyTgzCTF0yZQdnCd15zD138hP6XE12UG84cR+NGVleK8r/Vlmhlmcmza1wLOIGNNeYkOQH1+JTG5DcuW9LsczCbYu3Y4a6R8vZfYm5M2Q5CbpTKWcxQm5dKpOq97we7nA="
    secure: "Na+JnWo8OlFTrIjqKkhs/ZGCtSTcLS3HYF+d8X3ku8CHSTFwPiPqtlPjm/71AFVsdMiYUY9VWRGNvKUXNHvC9fSZNA15EbhsO54bYxBTuxKv/C3AknuSVi9TjHBJtDmvdRcaWTNZ/RnzPdqBFm90k7Ot8/lD8hqIkAs3M6278tlj+1Vs0kWxA5cXnJxdetYoQ1FgX74vC6MZs8qTefdZCy691UVqgGU2YhTxjwfvt7IJ+gkAFdDiePjmsRP+NcPSi2NVbz5sxIttxEJ8NSdPMLusUw2SEoBbBgnDh3dwpwMIMZ7AjbzUiuKM63X3BBV/QIslUp9zXM9nEapRmE6BLmtQHf5y1VB7y/m5raP8tqFFKYzTBTu4k6ZbkCis083EQE2cBWp5zdHLJK5mkKDa6kEDI7dkYKbPJ/rYXYNYVbAL5T1/R4MyhMamvNrMCslUp/sMWqL9b4iBRviHKrHJ13EhKK6kedlOExQs+E68qrepRnBOBqaPXeh6cqeWmPXsz+sMZvYxQlKhYax5VAuVKF+aFyil4H/m9qYj8Y4b5zWJeDLf/QMLnZh24hdFXwDOs8RgPDsBt3IOWwcY0wBABA2ktEPNTR7TuXYBG1k2nO7BRueP+dWqSdJCONbDwNtjBbAeA7Pg3ywEoAJ7TMAv54PGushbAXF5cZ6rXkuIPuY="
before_install:
  - sudo apt-get -qq update
install: pip install -r requirements.txt
addons:
  postgresql: '9.4'
  artifacts:
    paths:
      - ${APP_BUNDLE}
services:
  - postgresql
before_script:
  - psql -c 'create database demo_db;' -U postgres
script: nosetests
after_script:
  - zip -r ${APP_BUNDLE} . -x venv\* ./.\* \*__pycache__\* \*.pyc
